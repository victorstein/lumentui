{"id":"lumentui-0lm","title":"Notification History View Feature","description":"Add comprehensive notification history tracking with database persistence, TUI visualization, CLI access, filtering/sorting capabilities, and automatic cleanup of old records.\n\n**Requirements:**\n- Store notification history (when sent, which products, delivery status)\n- Display history in TUI with Ink/React component\n- Allow filtering/sorting (by date, product, status)\n- Show notification details (timestamp, product name, availability change)\n- Persist history in SQLite database\n- Add CLI command: lumentui history\n- Limit retention (30 days or 100 notifications)\n\n**Technical Approach:**\n- Extend notifications table schema\n- Update NotificationService for detailed recording\n- Add IPC endpoints for history access\n- Implement CLI command with table display\n- Create TUI component with interactive controls\n- Scheduled cleanup task for old records","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-03T18:17:04.262353-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:17:04.262353-06:00"}
{"id":"lumentui-0lm.1","title":"Phase 1: Database Schema \u0026 Service Layer","description":"Extend the database schema and DatabaseService to support full notification history tracking with metadata.\n\n**Goals:**\n- Extend notifications table with product_title, availability_change, error_message\n- Add metadata table for cleanup tracking\n- Implement query methods with filters (date, product, status, pagination)\n- Add cleanup/pruning method (30 days or 100 records limit)\n- Comprehensive unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:15.45517-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:47:55.376042-06:00","closed_at":"2026-02-03T18:47:55.376042-06:00","close_reason":"Phase 1 complete: Extended schema, added query methods, cleanup method, and comprehensive tests.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.1","depends_on_id":"lumentui-0lm","type":"parent-child","created_at":"2026-02-03T18:17:15.456576-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.1.1","title":"1.1: Extend notifications table schema","description":"Add columns to notifications table: product_title TEXT, availability_change TEXT, error_message TEXT. Update migration in database.service.ts.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:18.756918-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:34:11.028953-06:00","closed_at":"2026-02-03T18:34:11.028953-06:00","close_reason":"Extended notifications table with product_title, availability_change, and error_message columns. Backward compatible.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.1.1","depends_on_id":"lumentui-0lm.1","type":"parent-child","created_at":"2026-02-03T18:17:18.757651-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.1.2","title":"1.2: Add notification_history_metadata table","description":"Create new table for tracking cleanup operations: id, last_cleanup_timestamp, records_deleted, created_at.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:20.061658-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:35:21.920316-06:00","closed_at":"2026-02-03T18:35:21.920316-06:00","close_reason":"Created notification_history_metadata table with id, last_cleanup_timestamp, records_deleted, created_at columns.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.1.2","depends_on_id":"lumentui-0lm.1","type":"parent-child","created_at":"2026-02-03T18:17:20.062405-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.1.3","title":"1.3: Implement DatabaseService query methods","description":"Add methods: getNotificationHistory(filters), where filters include dateFrom, dateTo, productId, status, limit, offset. Return typed results.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:21.367065-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:39:03.624169-06:00","closed_at":"2026-02-03T18:39:03.624169-06:00","close_reason":"Implemented getNotificationHistory with filters (dateFrom, dateTo, productId, status, limit, offset) and getNotificationStats. Added 15 new tests.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.1.3","depends_on_id":"lumentui-0lm.1","type":"parent-child","created_at":"2026-02-03T18:17:21.367816-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.1.4","title":"1.4: Add DatabaseService cleanup method","description":"Implement pruneNotificationHistory(): delete records older than 30 days OR keep only last 100 records (whichever is more restrictive). Record cleanup in metadata table.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:22.961014-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:41:40.135814-06:00","closed_at":"2026-02-03T18:41:40.135814-06:00","close_reason":"Implemented pruneNotificationHistory with 30-day/100-record retention, metadata tracking, and 10 comprehensive tests. 204 total tests passing.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.1.4","depends_on_id":"lumentui-0lm.1","type":"parent-child","created_at":"2026-02-03T18:17:22.961787-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.1.5","title":"1.5: Write unit tests for DatabaseService","description":"Comprehensive tests for all new methods: schema creation, query filters, pagination, cleanup logic. Aim for \u003e90% coverage.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:24.778226-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:47:55.279963-06:00","closed_at":"2026-02-03T18:47:55.279963-06:00","close_reason":"Achieved 99.4% line coverage on DatabaseService. Added 5 error handling tests. 209 total tests passing.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.1.5","depends_on_id":"lumentui-0lm.1","type":"parent-child","created_at":"2026-02-03T18:17:24.77899-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.2","title":"Phase 2: NotificationService Enhancement","description":"Update NotificationService to record detailed notification history and implement cleanup scheduler.\n\n**Goals:**\n- Update recordNotification with detailed metadata\n- Add scheduled daily cleanup task\n- Add method to retrieve formatted history\n- Update unit tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:28.034783-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:58:04.812496-06:00","closed_at":"2026-02-03T18:58:04.812496-06:00","close_reason":"Phase 2 complete: Enhanced recordNotification with metadata, added scheduled cleanup, and getFormattedHistory/Stats methods.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.2","depends_on_id":"lumentui-0lm","type":"parent-child","created_at":"2026-02-03T18:17:28.035511-06:00","created_by":"victorstein"},{"issue_id":"lumentui-0lm.2","depends_on_id":"lumentui-0lm.1","type":"blocks","created_at":"2026-02-03T18:17:31.391432-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.2.1","title":"2.1: Update recordNotification method","description":"Modify recordNotification to store product_title, availability_change details (old vs new state), and error_message for failed notifications.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:34.475176-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:50:28.239724-06:00","closed_at":"2026-02-03T18:50:28.239724-06:00","close_reason":"Updated NotificationService to pass product_title, availability_change, and error_message metadata. Added describeAvailabilityChange helper. 212 tests passing.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.2.1","depends_on_id":"lumentui-0lm.2","type":"parent-child","created_at":"2026-02-03T18:17:34.475938-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.2.2","title":"2.2: Add scheduled cleanup task","description":"Add daily scheduled task (e.g., using NestJS @Cron) to call DatabaseService.pruneNotificationHistory(). Run at midnight or configurable time.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:36.069491-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:53:11.828393-06:00","closed_at":"2026-02-03T18:53:11.828393-06:00","close_reason":"Added daily @Cron task in SchedulerService to run pruneNotificationHistory at midnight. Includes error handling and IPC logging. 5 new tests.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.2.2","depends_on_id":"lumentui-0lm.2","type":"parent-child","created_at":"2026-02-03T18:17:36.070334-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.2.3","title":"2.3: Add getFormattedHistory method","description":"Create NotificationService.getFormattedHistory(filters) that calls DatabaseService and returns formatted data for IPC consumers (CLI/TUI).","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:37.556944-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:55:17.331649-06:00","closed_at":"2026-02-03T18:55:17.331649-06:00","close_reason":"Added getFormattedHistory and getNotificationStats methods with clean formatting, timestamp conversion, and comprehensive error handling. 45 tests in NotificationService.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.2.3","depends_on_id":"lumentui-0lm.2","type":"parent-child","created_at":"2026-02-03T18:17:37.557679-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.2.4","title":"2.4: Update NotificationService unit tests","description":"Add tests for enhanced recording logic, cleanup scheduler, and getFormattedHistory method. Mock DatabaseService calls.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:39.120203-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:58:04.724704-06:00","closed_at":"2026-02-03T18:58:04.724704-06:00","close_reason":"Verified 100% statement/function/line coverage on NotificationService. Added 2 edge case tests. 47 tests, 230 total in project.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.2.4","depends_on_id":"lumentui-0lm.2","type":"parent-child","created_at":"2026-02-03T18:17:39.121406-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.3","title":"Phase 3: IPC Gateway Extension","description":"Add IPC endpoints for notification history access from CLI and TUI.\n\n**Goals:**\n- Add getNotificationHistory IPC handler with filter parameters\n- Add getNotificationStats IPC handler\n- Update IpcClient utility with new methods\n- Integration tests","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:44.218027-06:00","created_by":"victorstein","updated_at":"2026-02-03T19:08:14.396816-06:00","closed_at":"2026-02-03T19:08:14.396816-06:00","close_reason":"Phase 3 complete: Added IPC handlers for getNotificationHistory and getNotificationStats, updated IpcClient, comprehensive tests.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.3","depends_on_id":"lumentui-0lm","type":"parent-child","created_at":"2026-02-03T18:17:44.218773-06:00","created_by":"victorstein"},{"issue_id":"lumentui-0lm.3","depends_on_id":"lumentui-0lm.2","type":"blocks","created_at":"2026-02-03T18:17:47.334316-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.3.1","title":"3.1: Add getNotificationHistory IPC handler","description":"Implement IPC handler in IpcGateway for getNotificationHistory with parameters: dateFrom, dateTo, productId, status, limit, offset. Calls NotificationService.getFormattedHistory().","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:51.092994-06:00","created_by":"victorstein","updated_at":"2026-02-03T19:02:50.555506-06:00","closed_at":"2026-02-03T19:02:50.555506-06:00","close_reason":"Added getNotificationHistory IPC handler with filter validation, error handling, and 6 comprehensive tests. 236 total tests.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.3.1","depends_on_id":"lumentui-0lm.3","type":"parent-child","created_at":"2026-02-03T18:17:51.093853-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.3.2","title":"3.2: Add getNotificationStats IPC handler","description":"Implement IPC handler for getNotificationStats: returns total sent, total failed, breakdown by product. Uses DatabaseService queries.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:52.528041-06:00","created_by":"victorstein","updated_at":"2026-02-03T19:04:55.763081-06:00","closed_at":"2026-02-03T19:04:55.763081-06:00","close_reason":"Added getNotificationStats IPC handler with error handling and 4 comprehensive tests. 31 IPC tests passing.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.3.2","depends_on_id":"lumentui-0lm.3","type":"parent-child","created_at":"2026-02-03T18:17:52.528905-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.3.3","title":"3.3: Update IpcClient utility","description":"Add methods to IpcClient (common/utils/ipc-client.util.ts): getNotificationHistory(filters), getNotificationStats(). Return typed Promise results.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:54.146848-06:00","created_by":"victorstein","updated_at":"2026-02-03T19:07:02.635174-06:00","closed_at":"2026-02-03T19:07:02.635174-06:00","close_reason":"Added getNotificationHistory and getNotificationStats methods to IpcClient with TypeScript interfaces. 240 total tests passing.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.3.3","depends_on_id":"lumentui-0lm.3","type":"parent-child","created_at":"2026-02-03T18:17:54.147559-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.3.4","title":"3.4: Write IPC integration tests","description":"Integration tests for new IPC endpoints: test with various filter combinations, verify data format, test error handling.","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:55.254186-06:00","created_by":"victorstein","updated_at":"2026-02-03T19:08:14.309453-06:00","closed_at":"2026-02-03T19:08:14.309453-06:00","close_reason":"Verified comprehensive integration tests exist for both IPC handlers. 31 tests covering all scenarios: success, errors, filters, stats, edge cases.","labels":["nestjs"],"dependencies":[{"issue_id":"lumentui-0lm.3.4","depends_on_id":"lumentui-0lm.3","type":"parent-child","created_at":"2026-02-03T18:17:55.254941-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.4","title":"Phase 4: CLI History Command","description":"Implement 'lumentui history' CLI command for viewing notification history in terminal.\n\n**Goals:**\n- Add history command to Commander.js\n- Implement table formatter for display\n- Add validation for command options\n- Test with various filters","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:17:59.722449-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:17:59.722449-06:00","labels":["cli"],"dependencies":[{"issue_id":"lumentui-0lm.4","depends_on_id":"lumentui-0lm","type":"parent-child","created_at":"2026-02-03T18:17:59.723318-06:00","created_by":"victorstein"},{"issue_id":"lumentui-0lm.4","depends_on_id":"lumentui-0lm.3","type":"blocks","created_at":"2026-02-03T18:18:03.050668-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.4.1","title":"4.1: Add history command to Commander.js","description":"Add new command in cli.ts: 'lumentui history' with options --product, --status (sent/failed), --days (default 30), --limit (default 50).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:07.242516-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:07.242516-06:00","labels":["cli"],"dependencies":[{"issue_id":"lumentui-0lm.4.1","depends_on_id":"lumentui-0lm.4","type":"parent-child","created_at":"2026-02-03T18:18:07.243544-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.4.2","title":"4.2: Implement history display formatter","description":"Create table formatter for console output. Columns: Timestamp, Product, Status, Details. Handle long text truncation, alignment.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:08.928388-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:08.928388-06:00","labels":["cli"],"dependencies":[{"issue_id":"lumentui-0lm.4.2","depends_on_id":"lumentui-0lm.4","type":"parent-child","created_at":"2026-02-03T18:18:08.929099-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.4.3","title":"4.3: Add validation for history options","description":"Use CliValidator to validate: --days must be positive integer, --limit must be 1-1000, --status must be 'sent' or 'failed'.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:10.518677-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:10.518677-06:00","labels":["cli"],"dependencies":[{"issue_id":"lumentui-0lm.4.3","depends_on_id":"lumentui-0lm.4","type":"parent-child","created_at":"2026-02-03T18:18:10.519395-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.4.4","title":"4.4: Test CLI history command","description":"Manual testing: run 'lumentui history' with various filter combinations, verify output formatting, error handling.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:11.687555-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:11.687555-06:00","labels":["cli"],"dependencies":[{"issue_id":"lumentui-0lm.4.4","depends_on_id":"lumentui-0lm.4","type":"parent-child","created_at":"2026-02-03T18:18:11.688555-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5","title":"Phase 5: TUI History Component","description":"Create Ink/React component for interactive notification history view in TUI.\n\n**Goals:**\n- Create useNotificationHistory hook\n- Build HistoryView component with list display\n- Add filtering controls (keyboard shortcuts)\n- Implement sorting controls\n- Add pagination support\n- Integrate into main App navigation","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:17.778013-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:17.778013-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5","depends_on_id":"lumentui-0lm","type":"parent-child","created_at":"2026-02-03T18:18:17.778717-06:00","created_by":"victorstein"},{"issue_id":"lumentui-0lm.5","depends_on_id":"lumentui-0lm.3","type":"blocks","created_at":"2026-02-03T18:18:20.890659-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5.1","title":"5.1: Create useNotificationHistory hook","description":"Custom hook in src/ui/hooks/: useNotificationHistory(filters). Fetches data via IpcClient, manages state, handles loading/error states.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:25.113603-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:25.113603-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5.1","depends_on_id":"lumentui-0lm.5","type":"parent-child","created_at":"2026-02-03T18:18:25.114363-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5.2","title":"5.2: Create HistoryView component","description":"Ink component in src/ui/components/HistoryView.tsx. Display list of notifications with columns: timestamp, product, status, details. Use Box, Text for layout.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:26.946124-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:26.946124-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5.2","depends_on_id":"lumentui-0lm.5","type":"parent-child","created_at":"2026-02-03T18:18:26.94689-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5.3","title":"5.3: Add filtering controls","description":"Implement keyboard shortcuts using useInput: 'd' for date filter, 'p' for product filter, 's' for status filter (sent/failed/all). Show active filters in UI.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:28.735401-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:28.735401-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5.3","depends_on_id":"lumentui-0lm.5","type":"parent-child","created_at":"2026-02-03T18:18:28.736329-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5.4","title":"5.4: Implement sorting controls","description":"Add sorting via keyboard: 't' for timestamp sort (toggle asc/desc), 'n' for product name sort, 'x' for status sort. Show current sort indicator.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:30.061926-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:30.061926-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5.4","depends_on_id":"lumentui-0lm.5","type":"parent-child","created_at":"2026-02-03T18:18:30.062626-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5.5","title":"5.5: Add pagination support","description":"Implement pagination: arrow keys or Page Up/Down for navigation. Show page N of M indicator. Default 50 items per page.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:31.687441-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:31.687441-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5.5","depends_on_id":"lumentui-0lm.5","type":"parent-child","created_at":"2026-02-03T18:18:31.688265-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.5.6","title":"5.6: Integrate into main App navigation","description":"Add HistoryView to App.tsx navigation. Keyboard shortcut 'h' to open history view. Back/ESC to return to main view.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:32.979686-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:32.979686-06:00","labels":["ink"],"dependencies":[{"issue_id":"lumentui-0lm.5.6","depends_on_id":"lumentui-0lm.5","type":"parent-child","created_at":"2026-02-03T18:18:32.98051-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6","title":"Phase 6: Quality Assurance","description":"Comprehensive testing and review before deployment.\n\n**Goals:**\n- Full test suite verification with \u003e90% coverage\n- Manual testing of CLI and TUI features\n- Database cleanup/pruning validation\n- Performance testing with large datasets\n- Cross-platform path verification","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:38.003583-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:38.003583-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6","depends_on_id":"lumentui-0lm","type":"parent-child","created_at":"2026-02-03T18:18:38.004345-06:00","created_by":"victorstein"},{"issue_id":"lumentui-0lm.6","depends_on_id":"lumentui-0lm.4","type":"blocks","created_at":"2026-02-03T18:18:41.320862-06:00","created_by":"victorstein"},{"issue_id":"lumentui-0lm.6","depends_on_id":"lumentui-0lm.5","type":"blocks","created_at":"2026-02-03T18:18:41.840505-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6.1","title":"6.1: Verify test coverage","description":"Run npm test with coverage report. Verify \u003e90% coverage for all new DatabaseService, NotificationService, IPC, and hook code.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:49.026223-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:49.026223-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6.1","depends_on_id":"lumentui-0lm.6","type":"parent-child","created_at":"2026-02-03T18:18:49.027121-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6.2","title":"6.2: Manual CLI testing","description":"Test 'lumentui history' with filters: --product, --status sent/failed, --days 7/30, --limit 10/50/100. Verify table formatting and edge cases (empty results, invalid options).","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:51.158855-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:51.158855-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6.2","depends_on_id":"lumentui-0lm.6","type":"parent-child","created_at":"2026-02-03T18:18:51.159757-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6.3","title":"6.3: Manual TUI testing","description":"Test TUI HistoryView: navigation with keyboard shortcuts, filtering (d/p/s), sorting (t/n/x), pagination (arrows/PgUp/PgDown). Verify UI responsiveness.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:53.19101-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:53.19101-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6.3","depends_on_id":"lumentui-0lm.6","type":"parent-child","created_at":"2026-02-03T18:18:53.191991-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6.4","title":"6.4: Verify cleanup/pruning","description":"Test database cleanup: create 30+ day old test records, verify pruning. Create 100+ records, verify retention limit. Check metadata table logging.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:55.127627-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:55.127627-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6.4","depends_on_id":"lumentui-0lm.6","type":"parent-child","created_at":"2026-02-03T18:18:55.128392-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6.5","title":"6.5: Performance testing","description":"Test with large datasets: insert 1000+ notification records, verify query performance, pagination responsiveness, TUI render speed.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:56.745874-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:56.745874-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6.5","depends_on_id":"lumentui-0lm.6","type":"parent-child","created_at":"2026-02-03T18:18:56.746581-06:00","created_by":"victorstein"}]}
{"id":"lumentui-0lm.6.6","title":"6.6: Cross-platform path verification","description":"Verify all file operations use PathsUtil (no hardcoded paths). Test database creation in platform-specific data directories.","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-03T18:18:58.223486-06:00","created_by":"victorstein","updated_at":"2026-02-03T18:18:58.223486-06:00","labels":["code-review"],"dependencies":[{"issue_id":"lumentui-0lm.6.6","depends_on_id":"lumentui-0lm.6","type":"parent-child","created_at":"2026-02-03T18:18:58.224215-06:00","created_by":"victorstein"}]}
{"id":"lumentui-2bo","title":"Fase 8: TUI - Terminal UI with Ink+React","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T10:51:04.656892953Z","created_by":"clawdbot","updated_at":"2026-02-02T10:56:09.007092016Z","closed_at":"2026-02-02T10:56:09.007092016Z","close_reason":"TUI complete - Ink+React interface with 14 hook tests, all components, navigation, IPC client"}
{"id":"lumentui-41v","title":"Fase 9: CLI Integration - Commander commands","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T10:51:04.722649506Z","created_by":"clawdbot","updated_at":"2026-02-02T10:57:38.243174371Z","closed_at":"2026-02-02T10:57:38.243174371Z","close_reason":"CLI Integration complete - Commander commands with daemon management"}
{"id":"lumentui-adf","title":"Fase 6: IPC Module - Unix socket communication","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T10:51:04.606132055Z","created_by":"clawdbot","updated_at":"2026-02-02T10:55:52.479226288Z","closed_at":"2026-02-02T10:55:52.479226288Z","close_reason":"IPC Module completed - Unix socket server with 90/90 tests passing"}
{"id":"lumentui-f3j","title":"Fase 1-5, 7: Core modules completed","description":"Auth, API, Storage, Scheduler, Notification, Integration Tests - All completed and tested","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T10:51:11.59763531Z","created_by":"clawdbot","updated_at":"2026-02-02T10:51:16.835381497Z","closed_at":"2026-02-02T10:51:16.835381497Z","close_reason":"Already completed"}
{"id":"lumentui-gcl","title":"Fase 10: Polish \u0026 Deploy - Final documentation and release","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T10:51:04.774265377Z","created_by":"clawdbot","updated_at":"2026-02-02T10:58:16.134342194Z","closed_at":"2026-02-02T10:58:16.134342194Z","close_reason":"Phase 10 complete - Documentation, polish, final commit v1.0.0 created"}
{"id":"lumentui-k9z","title":"LumenTUI OFV","status":"open","priority":2,"issue_type":"epic","created_at":"2026-02-02T17:55:32.601544414Z","created_by":"clawdbot","updated_at":"2026-02-02T17:55:32.601544414Z"}
{"id":"lumentui-k9z.1","title":"Fix TUI build: compile JSX components to dist/ui/","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:55:39.592759882Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.794736301Z","closed_at":"2026-02-02T18:09:56.794736301Z","close_reason":"TUI build pipeline fixed: ESM output with bundler resolution, dist/ui/package.json marker, all components compile.","labels":["ink"],"dependencies":[{"issue_id":"lumentui-k9z.1","depends_on_id":"lumentui-k9z","type":"parent-child","created_at":"2026-02-02T17:55:39.59415486Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.1.1","title":"Create tsconfig.ui.json with JSX support for src/ui/**","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:55:50.844364537Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.757767538Z","closed_at":"2026-02-02T18:09:56.757767538Z","close_reason":"TUI build pipeline fixed: ESM output with bundler resolution, dist/ui/package.json marker, all components compile.","dependencies":[{"issue_id":"lumentui-k9z.1.1","depends_on_id":"lumentui-k9z.1","type":"parent-child","created_at":"2026-02-02T17:55:50.84594456Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.1.2","title":"Add build:ui script to package.json that compiles UI to dist/ui/","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:55:50.892022791Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.767067849Z","closed_at":"2026-02-02T18:09:56.767067849Z","close_reason":"TUI build pipeline fixed: ESM output with bundler resolution, dist/ui/package.json marker, all components compile.","dependencies":[{"issue_id":"lumentui-k9z.1.2","depends_on_id":"lumentui-k9z.1","type":"parent-child","created_at":"2026-02-02T17:55:50.89358266Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.1.3","title":"Update main build script to include UI compilation","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:55:50.940321806Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.776159418Z","closed_at":"2026-02-02T18:09:56.776159418Z","close_reason":"TUI build pipeline fixed: ESM output with bundler resolution, dist/ui/package.json marker, all components compile.","dependencies":[{"issue_id":"lumentui-k9z.1.3","depends_on_id":"lumentui-k9z.1","type":"parent-child","created_at":"2026-02-02T17:55:50.941815818Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.1.4","title":"Verify TUI launches via lumentui start command","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:55:50.991071131Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.785245031Z","closed_at":"2026-02-02T18:09:56.785245031Z","close_reason":"TUI build pipeline fixed: ESM output with bundler resolution, dist/ui/package.json marker, all components compile.","dependencies":[{"issue_id":"lumentui-k9z.1.4","depends_on_id":"lumentui-k9z.1","type":"parent-child","created_at":"2026-02-02T17:55:50.992505558Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2","title":"Replace WhatsApp/clawdbot with native macOS notifications","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:55:41.524574998Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.935442614Z","closed_at":"2026-02-02T18:09:56.935442614Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","labels":["daemon"],"dependencies":[{"issue_id":"lumentui-k9z.2","depends_on_id":"lumentui-k9z","type":"parent-child","created_at":"2026-02-02T17:55:41.526021178Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.1","title":"Install node-notifier and remove clawdbot CLI dependency from notification.service.ts","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.643137529Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.863744976Z","closed_at":"2026-02-02T18:09:56.863744976Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.1","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.644709396Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.2","title":"Rewrite sendAvailabilityNotification() to use node-notifier for macOS native notifications","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.690712669Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.873226351Z","closed_at":"2026-02-02T18:09:56.873226351Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.2","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.692265122Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.3","title":"Remove phone number config from scheduler, cli.ts, .env.example, and .env","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.738773715Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.885121463Z","closed_at":"2026-02-02T18:09:56.885121463Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.3","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.741403439Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.4","title":"Update notification.service.spec.ts tests for node-notifier","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.794557492Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.897290701Z","closed_at":"2026-02-02T18:09:56.897290701Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.4","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.796566216Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.5","title":"Remove all WhatsApp and clawdbot references from docs (README, DEPLOYMENT, CONTRIBUTING, ARCHITECTURE, CLI_USAGE, HOMEBREW_SETUP)","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.850238955Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.906274792Z","closed_at":"2026-02-02T18:09:56.906274792Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.5","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.852328238Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.6","title":"Remove clawdbot references from ecosystem.config.js, scripts, integration tests, and agent definitions","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.905259852Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.915982093Z","closed_at":"2026-02-02T18:09:56.915982093Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.6","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.906779502Z","created_by":"clawdbot"}]}
{"id":"lumentui-k9z.2.7","title":"Update package.json description and keywords","status":"closed","priority":2,"issue_type":"task","created_at":"2026-02-02T17:56:43.953311365Z","created_by":"clawdbot","updated_at":"2026-02-02T18:09:56.925238156Z","closed_at":"2026-02-02T18:09:56.925238156Z","close_reason":"WhatsApp/clawdbot replaced with node-notifier macOS notifications. All references removed from code, docs, config, agents.","dependencies":[{"issue_id":"lumentui-k9z.2.7","depends_on_id":"lumentui-k9z.2","type":"parent-child","created_at":"2026-02-02T17:56:43.954887509Z","created_by":"clawdbot"}]}
{"id":"lumentui-p63","title":"Enhance daemon network resilience","description":"The daemon should be more resilient to network failures:\n\n**Current behavior:**\n- Has 3 retries with exponential backoff (via axios-retry)\n- Waits for next cron cycle (every minute) after all retries fail\n- Doesn't exit on network errors âœ“\n\n**Required improvements:**\n1. Verify daemon truly survives prolonged network outages\n2. Ensure retry interval matches configured poll interval (not hardcoded 1 minute)\n3. Add connection health tracking\n4. Consider implementing persistent retry queue for failed requests\n5. Add metrics for network failure recovery","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-03T15:48:13.043657-06:00","created_by":"alfonsogomez","updated_at":"2026-02-03T16:00:54.288225-06:00","closed_at":"2026-02-03T16:00:54.288225-06:00","close_reason":"Enhanced daemon network resilience by making poll interval configurable.\n\n**Changes made:**\n1. Replaced hardcoded @Cron decorator with dynamic interval using SchedulerRegistry\n2. Changed from cron expression to seconds-based interval (LUMENTUI_POLL_INTERVAL)\n3. Added proper lifecycle management with onModuleDestroy to cleanup intervals\n4. Updated tests to verify new interval behavior (21 tests, all passing)\n\n**Technical details:**\n- Poll interval now reads from LUMENTUI_POLL_INTERVAL config (default: 60 seconds)\n- Uses setInterval with milliseconds for precise control\n- Properly registers and unregisters intervals with SchedulerRegistry\n- Maintains existing retry logic (3 attempts with exponential backoff via axios-retry)\n- Daemon already survives network failures and continues polling\n\n**Result:**\nThe daemon now respects the configured poll interval and will retry at that same interval after network failures, instead of being hardcoded to 1 minute."}
{"id":"lumentui-z0k","title":"Fix CLI to work outside repository","description":"When running `lumentui start` outside the repository (e.g., after Homebrew installation), the CLI fails because it expects files in `process.cwd()`:\n\n**Hardcoded paths that fail:**\n- `process.cwd()/dist/main.js` - daemon binary\n- `process.cwd()/data/` - data directory\n- `process.cwd()/.env` - config file\n- Package version loading from repo structure\n\n**Required fixes:**\n1. Detect installation directory (where binary is installed)\n2. Use installation dir for daemon binary and bundled resources\n3. Use proper user data directory (XDG_DATA_HOME or ~/.local/share/lumentui)\n4. Provide sensible defaults when .env is missing\n5. Bundle or hardcode version info","status":"closed","priority":1,"issue_type":"bug","created_at":"2026-02-03T15:48:07.519854-06:00","created_by":"alfonsogomez","updated_at":"2026-02-03T15:56:50.69158-06:00","closed_at":"2026-02-03T15:56:50.69158-06:00","close_reason":"Fixed CLI portability by implementing PathsUtil for cross-platform path resolution.\n\n**Changes made:**\n1. Created PathsUtil class with platform-specific path resolution\n2. Updated PidManager to use user data directory instead of process.cwd()\n3. Updated IpcClient to use configurable socket path\n4. Updated CLI to use installation directory for daemon binary\n5. Updated database and logger services to use proper default paths\n6. Added environment variable overrides (LUMENTUI_DATA_DIR, LUMENTUI_CONFIG_DIR)\n7. Added comprehensive unit tests (20 tests, all passing)\n\n**Platform support:**\n- macOS/Linux: Uses XDG Base Directory spec (~/.local/share, ~/.config)\n- Windows: Uses %APPDATA%\n- Cross-platform IPC socket paths (Unix socket on macOS/Linux, named pipe on Windows)\n\nThe CLI now works correctly when installed via Homebrew or npm global without requiring the repository."}
